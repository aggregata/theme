{{!--
Re-usable card for linking to posts
--}}

<article>
  <a class="block rounded-xl" style="view-transition-name: post-{{ slug }}" href="{{url}}">
    {{#if feature_image}}
      <picture>
        <source srcset="
            {{img_url feature_image format='avif' size='xs' }} 240w, {{img_url feature_image format='avif' size='sm'
          }} 480w, {{img_url feature_image format='avif' size='md' }} 720w "
          type=" image/avif" {{#unless @first}} loading="lazy" {{/unless}}>
        <source srcset="
          {{img_url feature_image format='avif' size='xs' }} 240w, {{img_url feature_image format='avif' size='sm' }}
          480w, {{img_url feature_image format='avif' size='md' }} 720w "
        type=" image/webp" {{#unless @first}}loading="lazy" {{/unless}}>
        <img class="border w-full aspect-video mb-6 rounded-xl" srcset="
            {{img_url feature_image format='avif' size='xs' }} 240w, {{img_url feature_image format='avif' size='sm' }} 480w, {{img_url
          feature_image format='avif' size='md' }} 720w" src=" {{img_url feature_image format='avif' size='md' }}"
          alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}" {{#unless @first}}loading="lazy"
          {{/unless}}>
      </picture>
    {{/if}}

    <h2 class="leading-tight font-medium text-foreground text-h5">
      {{title}}
    </h2>
    <p class="mt-3">{{excerpt characters='150'}}</p>
  </a>

  <div class="mt-3 flex items-center flex-wrap gap-1 leading-6 text-sm font-medium">
    {{> author}}
      {{#unless access}}
        <a
          class="text-background bg-foreground flex p-1 rounded-md"
          href="#/portal/account/plans"
          title="Get Early Access"
        >
          {{> icon icon="lock" }}
        </a>
      {{/unless}}
    {{#if featured}}
      <span class="flex flex-wrap gap-1 items-center px-2 rounded-md text-background bg-foreground">
        {{> icon icon="sparks-solid" }}
        {{t 'Featured'}}
      </span>
    {{/if}}
    {{#primary_tag}}
      <a class="bg-background-subtle px-2 rounded-md hover:bg-border focus:bg-border transition-colors"
        href="{{url}}">{{name}}</a>
    {{/primary_tag}}
    <span class="px-2">{{date}}</span>
    <span class="px-2">{{reading_time}}</span>
  </div>

</article>